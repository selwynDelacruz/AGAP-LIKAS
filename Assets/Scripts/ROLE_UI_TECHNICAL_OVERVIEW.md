# Role-Based UI System - Technical Overview

```
???????????????????????????????????????????????????????????????????????????
?                         AGAP-LIKAS SYSTEM FLOW                          ?
???????????????????????????????????????????????????????????????????????????

????????????????????
?  Login Scene     ?
?  (MainMenu)      ?
????????????????????
         ?
         ?
??????????????????????????????????????
?  User selects role:                ?
?  • Instructor                      ?
?  • Trainee                         ?
?  • Super Admin                     ?
??????????????????????????????????????
         ?
         ?
??????????????????????????????????????
?  Firebase Authentication           ?
?  PlayerPrefs.SetString(            ?
?    "Type_Of_User", "instructor"    ?
?  )                                 ?
??????????????????????????????????????
         ?
         ?
??????????????????????????????????????
?  Network Connection                ?
?                                    ?
?  Instructor ? NetworkUI.Host()     ?
?  Trainee    ? NetworkUI.Join()     ?
??????????????????????????????????????
         ?
         ?
??????????????????????????????????????
?  Game Scene Loads                  ?
?  GameManager.Start()               ?
??????????????????????????????????????
         ?
         ?
???????????????????????????????????????????????????????????????????????
?                  GAMEMANAGER INITIALIZATION SEQUENCE                ?
???????????????????????????????????????????????????????????????????????
?                                                                     ?
?  1. InitializeRoleDetection()                                       ?
?     ?? currentUserRole = PlayerPrefs.GetString("Type_Of_User")     ?
?     ?? isHost = NetworkManager.Singleton.IsHost                    ?
?     ?? Validate role consistency                                   ?
?                                                                     ?
?  2. InitializeDisasterScene()                                       ?
?     ?? Load selected disaster type                                 ?
?                                                                     ?
?  3. InitializeVictimTracking()                                      ?
?     ?? Set up victim rescue system                                 ?
?                                                                     ?
?  4. InitializeMedkitSystem()                                        ?
?     ?? Configure medkit inventory                                  ?
?                                                                     ?
?  5. InitializeDurationSystem()                                      ?
?     ?? Start game timer                                            ?
?                                                                     ?
?  6. InitializeRoleBasedUI() ? NEW ?                                 ?
?     ?? bool showInstructorUI = ShouldShowInstructorUI()            ?
?     ?? bool showTraineeUI = ShouldShowTraineeUI()                  ?
?     ?? instructorUIPanel.SetActive(showInstructorUI)               ?
?     ?? traineeUIPanel.SetActive(showTraineeUI)                     ?
?                                                                     ?
???????????????????????????????????????????????????????????????????????
         ?
         ?
???????????????????????????????????????????????????????????????????????
?                         ROLE DETERMINATION                           ?
???????????????????????????????????????????????????????????????????????
?                                                                     ?
?  ShouldShowInstructorUI():                                          ?
?    return (currentUserRole == "instructor" && isHost)               ?
?                                                                     ?
?  ShouldShowTraineeUI():                                             ?
?    return (currentUserRole == "trainee" || !isHost)                 ?
?                                                                     ?
???????????????????????????????????????????????????????????????????????
         ?
         ?
???????????????????????????????????????????????????????????????????????
?                          RESULT SCENARIOS                            ?
???????????????????????????????????????????????????????????????????????

?????????????????????????????????????????????????????????????????????
?  SCENARIO 1: Instructor Host (Correct)                           ?
?????????????????????????????????????????????????????????????????????
?  UserType:    "instructor"                                        ?
?  IsHost:      TRUE                                                ?
?  IsClient:    FALSE                                               ?
?  ?????????????????????????????????????????????????????????????    ?
?  Result:      ? Instructor UI: VISIBLE                           ?
?               ? Trainee UI:    HIDDEN                            ?
?????????????????????????????????????????????????????????????????????

?????????????????????????????????????????????????????????????????????
?  SCENARIO 2: Trainee Client (Correct)                            ?
?????????????????????????????????????????????????????????????????????
?  UserType:    "trainee"                                           ?
?  IsHost:      FALSE                                               ?
?  IsClient:    TRUE                                                ?
?  ?????????????????????????????????????????????????????????????    ?
?  Result:      ? Instructor UI: HIDDEN                            ?
?               ? Trainee UI:    VISIBLE                           ?
?????????????????????????????????????????????????????????????????????

?????????????????????????????????????????????????????????????????????
?  SCENARIO 3: Single Player Instructor                            ?
?????????????????????????????????????????????????????????????????????
?  UserType:    "instructor"                                        ?
?  IsHost:      TRUE (simulated, no NetworkManager)                ?
?  IsClient:    N/A                                                 ?
?  ?????????????????????????????????????????????????????????????    ?
?  Result:      ? Instructor UI: VISIBLE                           ?
?               ? Trainee UI:    HIDDEN                            ?
?????????????????????????????????????????????????????????????????????

?????????????????????????????????????????????????????????????????????
?  SCENARIO 4: Role Mismatch (Warning!)                            ?
?????????????????????????????????????????????????????????????????????
?  UserType:    "trainee"                                           ?
?  IsHost:      TRUE                                                ?
?  IsClient:    FALSE                                               ?
?  ?????????????????????????????????????????????????????????????    ?
?  Warning:     ??  Trainee logged in as host!                     ?
?  Result:      ? Instructor UI: HIDDEN                            ?
?               ? Trainee UI:    VISIBLE (follows user type)       ?
?????????????????????????????????????????????????????????????????????

???????????????????????????????????????????????????????????????????????
?                        PUBLIC API METHODS                            ?
???????????????????????????????????????????????????????????????????????

????????????????????????????????????????????????????????????????
?  bool IsInstructor()                                         ?
?  ????????????????????????????????????????????????????????    ?
?  Returns: true if user is instructor AND host               ?
?  Use: Conditional instructor-only features                  ?
????????????????????????????????????????????????????????????????

????????????????????????????????????????????????????????????????
?  bool IsTrainee()                                            ?
?  ????????????????????????????????????????????????????????    ?
?  Returns: true if user is trainee OR client                 ?
?  Use: Conditional trainee-only features                     ?
????????????????????????????????????????????????????????????????

????????????????????????????????????????????????????????????????
?  string GetCurrentUserRole()                                 ?
?  ????????????????????????????????????????????????????????    ?
?  Returns: "instructor", "trainee", or "super_admin"          ?
?  Use: Display current role, logging, analytics              ?
????????????????????????????????????????????????????????????????

????????????????????????????????????????????????????????????????
?  void ToggleRoleUI(bool showInstructor, bool showTrainee)   ?
?  ????????????????????????????????????????????????????????    ?
?  Parameters: Manual UI visibility control                   ?
?  Use: Testing, special cases, admin override                ?
????????????????????????????????????????????????????????????????

???????????????????????????????????????????????????????????????????????
?                         DATA FLOW DIAGRAM                            ?
???????????????????????????????????????????????????????????????????????

PlayerPrefs                    NetworkManager
    ?                               ?
    ? "Type_Of_User"                ? IsHost / IsClient
    ?                               ?
    ?????????????????????????????????
                ?
                ?
        ?????????????????
        ? GameManager   ?
        ? Role Detection?
        ?????????????????
                ?
        ?????????????????
        ?               ?
        ?               ?
????????????????  ????????????????
? Instructor   ?  ?  Trainee     ?
? UI Panel     ?  ?  UI Panel    ?
?              ?  ?              ?
? • Monitoring ?  ? • HUD        ?
? • Controls   ?  ? • Objectives ?
? • Admin      ?  ? • Gameplay   ?
????????????????  ????????????????

???????????????????????????????????????????????????????????????????????
?                      INTEGRATION POINTS                              ?
???????????????????????????????????????????????????????????????????????

???????????????????????????????????????????????????????????????????
?  AuthManager.cs                                                 ?
?  ?????????????????????????????????????????????????????????      ?
?  • Sets PlayerPrefs("Type_Of_User", role)                       ?
?  • Called during Firebase login                                 ?
?  • Validates user credentials                                   ?
???????????????????????????????????????????????????????????????????
                            ?
                            ?
???????????????????????????????????????????????????????????????????
?  NetworkUI.cs                                                   ?
?  ?????????????????????????????????????????????????????????      ?
?  • Instructor clicks "Host" ? NetworkManager.StartHost()        ?
?  • Trainee clicks "Join" ? NetworkManager.StartClient()         ?
???????????????????????????????????????????????????????????????????
                            ?
                            ?
???????????????????????????????????????????????????????????????????
?  GameManager.cs ? UPDATED ?                                     ?
?  ?????????????????????????????????????????????????????????      ?
?  • Reads PlayerPrefs and NetworkManager state                   ?
?  • Activates appropriate UI panels                              ?
?  • Provides role-checking API                                   ?
???????????????????????????????????????????????????????????????????
                            ?
                            ?
???????????????????????????????????????????????????????????????????
?  Your Custom Scripts                                            ?
?  ?????????????????????????????????????????????????????????      ?
?  • Use GameManager.Instance.IsInstructor()                      ?
?  • Use GameManager.Instance.IsTrainee()                         ?
?  • Implement role-specific features                             ?
???????????????????????????????????????????????????????????????????

???????????????????????????????????????????????????????????????????????
?                      VALIDATION & WARNINGS                           ?
???????????????????????????????????????????????????????????????????????

???????????????????????????????????????????????????????????????
?  ??  WARNING CONDITIONS                                     ?
???????????????????????????????????????????????????????????????
?  1. Instructor logged in but not hosting                    ?
?     ? Warning logged, UI hidden                             ?
?                                                             ?
?  2. Trainee logged in as host                               ?
?     ? Warning logged, Trainee UI shown (follows role)       ?
?                                                             ?
?  3. UI Panel not assigned in Inspector                      ?
?     ? Warning logged when that UI should be shown           ?
?                                                             ?
?  4. NetworkManager missing                                  ?
?     ? Falls back to PlayerPrefs-based detection             ?
???????????????????????????????????????????????????????????????

???????????????????????????????????????????????????????????????????????
?                         DEBUG MODE                                   ?
???????????????????????????????????????????????????????????????????????

When debugRoleUI = true in GameManager:

Console Output Example:
????????????????????????????????????????????????????????????
? [GameManager] Role Detection -                           ?
?   UserType: instructor,                                  ?
?   IsHost: True,                                          ?
?   IsClient: False                                        ?
?                                                          ?
? [GameManager] Instructor UI Panel: ENABLED               ?
? [GameManager] Trainee UI Panel: DISABLED                 ?
????????????????????????????????????????????????????????????

```

## Summary

This system provides:
- ? Automatic role detection
- ? Network-aware UI management
- ? Validation and warnings
- ? Clean separation of concerns
- ? Easy-to-use public API
- ? Debug support

The role-based UI system ensures that instructors and trainees have appropriate, role-specific interfaces in the multiplayer rescue training simulation.
